package com.giantwriting.developing;

import java.awt.Graphics;

import javax.swing.*;

public class Screen extends JPanel implements Runnable{
	
	Thread thread;

	
	int fps = 0;
	int ups = 0;
	
	
	public Screen(JFrame frame){
		thread = new Thread();
		thread.start();
	}

	private void update(){
		
	}
	
	public void paintComponent(Graphics g){
		
	}
	
	@Override
	public void run() {
		
		boolean print_fps_to_console = true;
	
		int UPDATES_PER_SECONDS = 50;
		int FRAMES_PER_SECONDS = 100;
		
		
		long GAME_SKIP_TICKS = 1000 / UPDATES_PER_SECONDS;
		long FRAME_SKIP_TICKS = 1000 / FRAMES_PER_SECONDS;
		long MAX_FRAMESKIPS = 5;
		
		
		long next_game_tick = System.currentTimeMillis();
		long next_frame_tick = System.currentTimeMillis();
		long time = System.currentTimeMillis();
		
		int loops;
		
		// Variables to update the UPS & FPS variables
		int frames = 0;
		int updates = 0;
			
		
		while(true) {
			loops = 0;
			while(System.currentTimeMillis() >  next_game_tick && loops < MAX_FRAMESKIPS){
				update();
				
				next_game_tick += GAME_SKIP_TICKS;
				updates++;
				loops++;
				
				
			}
			

			
			if(System.currentTimeMillis() > next_frame_tick ){
				
				next_frame_tick += FRAME_SKIP_TICKS;
				
				repaint();
				frames++;
				
			}
			
			
			if(time+1000 <= System.currentTimeMillis()){
				time+=1000;
				
				
				fps = frames;
				ups = updates;
				updates = 0;
				frames = 0;
				
				
				
				if(print_fps_to_console) {
					
					System.out.println("FPS: " + fps);
					System.out.println("UPS: "+ ups);
				}
				
				
			
		}
		
	}

}
	}